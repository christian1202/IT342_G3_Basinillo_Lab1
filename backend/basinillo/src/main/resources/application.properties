# ==========================================
# MAIN CONFIGURATION
# ==========================================
spring.application.name=basinillo

# 1. Import local secrets (Optional - ignored if missing)
spring.config.import=optional:classpath:application-secret.properties

# 2. Connection Pooling (Hikari) - Optimized for Free Tier
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=5

# 3. JPA / Hibernate Settings
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ==========================================
# 4. ENVIRONMENT INTELLIGENCE (The CTO Fix)
# ==========================================

# URL LOGIC:
# - On Railway: It finds ${DATABASE_URL} and adds 'jdbc:' to the front.
# - On Local: It can't find ${DATABASE_URL}, so it uses 'postgresql://localhost...'
#spring.datasource.url=jdbc:${DATABASE_URL:postgresql://localhost:5432/basinillo}

spring.datasource.url=jdbc:${DATABASE_URL}

# USERNAME LOGIC:
# - On Railway: It uses the standard ${PGUSER} variable.
# - On Local: It defaults to 'postgres'.
spring.datasource.username=${PGUSER:postgres}

# PASSWORD LOGIC:
# - On Railway: It uses the standard ${PGPASSWORD} variable.
# - On Local: It defaults to an empty string (or whatever your local pass is).
spring.datasource.password=${PGPASSWORD:}

# DRIVER:
spring.datasource.driver-class-name=org.postgresql.Driver